## Speed Up Zsh Startup (Highly Recommended)

If your terminal feels slow to open, this is usually caused by:

* Oh My Zsh loading many features at startup
* Python Conda initializing on every terminal launch

This section explains **safe optimizations** that make Zsh start much faster, without breaking anything.

---

## Before & After (Real Example)

| State               | Startup Time  |
| ------------------- | ------------- |
| Default setup       | ~1.1 seconds  |
| After optimizations | ~0.38 seconds |

Your terminal prompt appears **almost instantly**.

---

## 1. Enable Instant Prompt (Biggest Improvement)

If you use **Powerlevel10k**, enable its instant prompt feature.

Add this **at the very top** of `~/.zshrc`:

```bash
# Powerlevel10k instant prompt (must be at the top)
if [[ -r "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh" ]]; then
  source "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh"
fi
```

This shows the prompt immediately while the rest of Zsh loads in the background.

---

## 2. Reduce Oh My Zsh Overhead

Oh My Zsh enables many checks by default.
These are useful, but slow.

Add this anywhere in `~/.zshrc`:

```bash
# Speed up Oh My Zsh
export DISABLE_AUTO_UPDATE=true
export DISABLE_UNTRACKED_FILES_DIRTY=true
```

This disables unnecessary background work.

---

## 3. Use Only Essential Plugins

Every plugin adds startup time.

Recommended minimal set:

```bash
plugins=(
  git
  zsh-autosuggestions
  zsh-syntax-highlighting
)
```

Avoid loading plugins you don’t use daily.

---

## 4. Lazy Load Conda (Very Important)

Conda is powerful, but slow when loaded on every shell start.

Instead of initializing Conda automatically, we load it **only when needed**.

### Replace Conda Init Block

Remove the block generated by `conda init`, then add:

```bash
# ---- conda (lazy load) ----
_conda_loaded=false

conda() {
  if ! $_conda_loaded; then
    export PATH="/opt/homebrew/Caskroom/miniconda/base/bin:$PATH"
    source "/opt/homebrew/Caskroom/miniconda/base/etc/profile.d/conda.sh"
    _conda_loaded=true
  fi
  command conda "$@"
}
# ---- end conda ----
```

Now Conda loads only when you type:

```bash
conda activate myenv
```

---

## 5. Disable Auto-Activation of Base Environment

Run once:

```bash
conda config --set auto_activate_base false
```

This prevents Conda from slowing down your prompt on every terminal launch.

---

## 6. Optional: Make Visual Tools Non-Blocking

If you auto-run tools like `pfetch`, run them in the background:

```bash
pfetch &
```

This keeps the prompt responsive.

---

## How to Measure Startup Time

To check your shell startup time:

```bash
time zsh -i -c exit
```

Good targets:

* **< 0.5s** → very good
* **< 0.2s** → excellent
* **~0.05s** → near instant

---

## Summary

These optimizations:

* Do **not** remove features
* Do **not** break Conda
* Improve daily usability immediately

They are safe defaults for most developers.

---

If you want next, we can:

* Add an automatic optimizer script
* Profile slow plugins (`zprof`)
* Create a “fast mode” vs “pretty mode”
* Optimize for Linux as well

Just tell me.
